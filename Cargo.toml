[package]
name = "greentic-dev"
version = "0.4.48"
edition = "2024"
description = "Developer CLI and local tooling for Greentic flows, packs, and components"
license = "MIT"
repository = "https://github.com/greentic-ai/greentic-dev"
homepage = "https://greentic.ai/"
documentation = "https://docs.rs/greentic-dev"
# Ensure runtime assets ship with the crate.
include = [
    "src/**",
    "templates/**",
    "README.md",
    "LICENSE*",
    "Cargo.toml",
]

[package.metadata.binstall]
pkg-url = "{ repo }/releases/download/v{ version }/greentic-dev-v{ version }-{ target }.tgz"
pkg-fmt = "tgz"
bin-dir = "{ bin }{ binary-ext }"

[[bin]]
name = "greentic-component"
path = "src/bin/greentic-component.rs"

[[bin]]
name = "greentic-secrets"
path = "src/bin/greentic-secrets.rs"
required-features = ["bundled-tools"]

[[bin]]
name = "greentic-gui"
path = "src/bin/greentic-gui.rs"
required-features = ["bundled-tools"]

[[bin]]
name = "greentic-flow"
path = "src/bin/greentic-flow.rs"
required-features = ["bundled-tools"]

[[bin]]
name = "greentic-pack"
path = "src/bin/greentic-pack.rs"
required-features = ["bundled-tools"]

[[bin]]
name = "greentic-runner"
path = "src/bin/greentic-runner.rs"
required-features = ["bundled-tools"]

[[bin]]
name = "greentic-runner-cli"
path = "src/bin/greentic-runner-cli.rs"
required-features = ["bundled-tools"]

[workspace]
members = ["crates/dev-viewer", "xtask"]
resolver = "2"

[features]
# This crate ships a multi-tool bin bundle via release artifacts. Some bins are
# only meaningful when installed from those artifacts.
bundled-tools = []

[dependencies]
anyhow = "1.0"
clap = { version = "4.5", features = ["derive"] }
serde_yaml_bw = "2"
once_cell = "1.19"
convert_case = "0.11"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
serde_cbor = "0.11"
toml = "0.9"
toml_edit = "0.23"
semver = "1.0"
sha2 = "0.10"
time = { version = "0.3", features = ["macros", "formatting"] }
wit-component = "0.244"
wit-parser = "0.244"
base64 = "0.22"
greentic-interfaces = { version = "0.4", default-features = false, features = ["describe-v1"] }
greentic-types = { version = "0.4", features = ["serde"] }
greentic-flow = "0.4"
greentic-pack-lib = "0.4"
greentic-mcp = "0.4"
greentic-component = { version = "0.4", features = ["prepare", "describe", "cli"] }
greentic-secrets = { version = "0.4", default-features = false, features = ["core", "spec"] }
jsonschema = "0.38"
tempfile = "3"
dirs = "6"
which = "8"
reqwest = { version = "0.12", default-features = false, features = ["blocking", "json", "rustls-tls"] }
zip = { version = "7", default-features = false, features = ["deflate"] }
bytes = "1.7"
async-compression = "0.4"
greentic-distributor-client = { version = "0.4", features = ["http-runtime"] }
tokio = { version = "1", features = ["macros", "rt-multi-thread"] }
async-trait = "0.1"

[workspace.metadata.dist]
cargo-dist-version = "0.24.1"
ci = ["github"]
installers = ["shell"]
targets = [
    "x86_64-unknown-linux-gnu",
    "x86_64-apple-darwin",
    "aarch64-apple-darwin",
    "x86_64-pc-windows-msvc",
]

[workspace.metadata.dist.package.greentic-dev]
all-features = true

[dev-dependencies]
httpmock = "0.8"
walkdir = "2"
blake3 = "1"
indexmap = "2"
greentic-secrets = { version = "0.4", default-features = false, features = ["core"] }
async-trait = "0.1"
assert_cmd = "2"
predicates = "3"
