# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2024"
rust-version = "1.89"
name = "greentic-component"
version = "0.4.15"
build = false
include = [
    "Cargo.toml",
    "assets/**",
    "examples/**",
    "schemas/**",
    "src/**",
    "tests/**",
]
autolib = false
autobins = false
autoexamples = false
autotests = false
autobenches = false
description = "High-level component loader and store for Greentic components"
homepage = "https://github.com/greentic-ai/greentic-component"
documentation = "https://docs.rs/greentic-component"
readme = false
keywords = [
    "greentic",
    "component",
    "wasm",
]
categories = ["wasm"]
license = "MIT"
repository = "https://github.com/greentic-ai/greentic-component"
resolver = "2"

[features]
abi = [
    "dep:wit-component",
    "dep:wit-parser",
    "dep:wasmparser",
]
cli = [
    "prepare",
    "dep:clap",
    "dep:include_dir",
    "dep:handlebars",
    "dep:walkdir",
    "dep:tempfile",
    "dep:miette",
]
default = [
    "oci",
    "cli",
]
describe = ["abi"]
loader = ["describe"]
oci = ["dep:oci-distribution"]
prepare = [
    "loader",
    "dep:dashmap",
]
schema = ["dep:schemars"]

[lib]
name = "greentic_component"
path = "src/lib.rs"

[[bin]]
name = "component-doctor"
path = "src/bin/component-doctor.rs"

[[bin]]
name = "component-hash"
path = "src/bin/component-hash.rs"

[[bin]]
name = "component-inspect"
path = "src/bin/component-inspect.rs"

[[bin]]
name = "greentic-component"
path = "src/bin/greentic-component.rs"

[[example]]
name = "gen_fixture"
path = "examples/gen_fixture.rs"
required-features = ["abi"]

[[test]]
name = "abi_tests"
path = "tests/abi_tests.rs"

[[test]]
name = "cache_and_compat"
path = "tests/cache_and_compat.rs"

[[test]]
name = "capability_tests"
path = "tests/capability_tests.rs"

[[test]]
name = "cli_tests"
path = "tests/cli_tests.rs"

[[test]]
name = "describe_tests"
path = "tests/describe_tests.rs"

[[test]]
name = "flow_scaffold"
path = "tests/flow_scaffold.rs"

[[test]]
name = "limits_tests"
path = "tests/limits_tests.rs"

[[test]]
name = "loader_tests"
path = "tests/loader_tests.rs"

[[test]]
name = "manifest_tests"
path = "tests/manifest_tests.rs"

[[test]]
name = "new_scaffold"
path = "tests/new_scaffold.rs"

[[test]]
name = "schema_tests"
path = "tests/schema_tests.rs"

[[test]]
name = "signing_tests"
path = "tests/signing_tests.rs"

[[test]]
name = "snapshot_util"
path = "tests/snapshot_util.rs"

[[test]]
name = "telemetry_tests"
path = "tests/telemetry_tests.rs"

[[test]]
name = "templates_snapshot"
path = "tests/templates_snapshot.rs"

[dependencies.anyhow]
version = "1"

[dependencies.blake3]
version = "1"

[dependencies.bytes]
version = "1"

[dependencies.clap]
version = "4"
features = ["derive"]
optional = true

[dependencies.dashmap]
version = "6"
optional = true

[dependencies.directories]
version = "6"

[dependencies.displaydoc]
version = "0.2"

[dependencies.greentic-component-manifest]
version = "0.4"

[dependencies.greentic-types]
version = "0.4"

[dependencies.handlebars]
version = "6"
optional = true

[dependencies.hex]
version = "0.4"

[dependencies.ignore]
version = "0.4"

[dependencies.include_dir]
version = "0.7"
optional = true

[dependencies.jsonschema]
version = "0.37"

[dependencies.miette]
version = "7"
features = ["derive"]
optional = true
default-features = false

[dependencies.oci-distribution]
version = "0.11"
optional = true

[dependencies.once_cell]
version = "1"

[dependencies.pathdiff]
version = "0.2"

[dependencies.regex]
version = "1"

[dependencies.schemars]
version = "1"
optional = true

[dependencies.semver]
version = "1"
features = ["serde"]

[dependencies.serde]
version = "1"
features = ["derive"]

[dependencies.serde_json]
version = "1"

[dependencies.serde_with]
version = "3"

[dependencies.serde_yaml_bw]
version = "2"

[dependencies.sha2]
version = "0.10"

[dependencies.tempfile]
version = "3"
optional = true

[dependencies.thiserror]
version = "2"

[dependencies.time]
version = "0.3"
features = [
    "serde",
    "formatting",
    "parsing",
]

[dependencies.tokio]
version = "1"
features = [
    "macros",
    "rt-multi-thread",
    "sync",
    "fs",
    "time",
    "io-util",
]

[dependencies.tracing]
version = "0.1"

[dependencies.walkdir]
version = "2"
optional = true

[dependencies.wasm-metadata]
version = "0.243"

[dependencies.wasmparser]
version = "0.243"
optional = true

[dependencies.wit-component]
version = "0.243"
optional = true

[dependencies.wit-parser]
version = "0.243"
optional = true

[dev-dependencies.assert_cmd]
version = "2"

[dev-dependencies.assert_fs]
version = "1"

[dev-dependencies.greentic-interfaces-guest]
version = "0.4"

[dev-dependencies.insta]
version = "1"
features = [
    "glob",
    "json",
]

[dev-dependencies.predicates]
version = "3"

[dev-dependencies.tempfile]
version = "3"

[dev-dependencies.tokio]
version = "1"
features = [
    "macros",
    "rt-multi-thread",
    "sync",
    "fs",
    "time",
    "io-util",
]

[dev-dependencies.wasm-encoder]
version = "0.243"
